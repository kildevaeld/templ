!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.templ=e():t.templ=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){"function"!=typeof e&&(e=h.extendClass(f.BaseAttribute,e)),f[t]=e}function i(t,e){"function"!=typeof e&&(e=h.extendClass(l.BaseComponent,e)),l[t]=e}function o(t,e){p[t]=e}function s(t){h.Debug.enable(t)}function u(t,e){var n=c,r=v.compile(t),i=r(n.fragment,n.element,n.text,n.comment,n.dynamic,y.binding);return n.template(i,h.extend({document:null,viewClass:d.View,attributes:new a.Repository(f),components:new a.Repository(l),modifiers:p},e||{}))}var a=n(1),c=n(2),l=n(15),f=n(18),p=n(25),h=n(7),d=n(21),v=n(26),y=n(28);e.version="$$version$$",e.attribute=r,e.component=i,e.modifier=o,e.debugging=s,e.compile=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.values=e||{}}return t.prototype.set=function(t,e){this.values[t]=e},t.prototype.get=function(t){return this.values[t]},t.prototype.has=function(t){return!!this.get(t)},t.prototype["delete"]=function(t){delete this.values[t]},t}();e.Repository=r},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(3)),r(n(4)),r(n(6)),r(n(10)),r(n(11)),r(n(12)),r(n(14)),r(n(13)),r(n(5))},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.nodeType=8,this.nodeValue=e}return t.prototype.render=function(t){return t.document.createComment(this.nodeValue)},t}();e.Comment=r,e.comment=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(5),o=function(){function t(e,n){r(this,t),this.nodeType=-200,this.vnode=e,this.bindingClass=n,this.vnode.parentNode=this}return t.prototype.render=function(t,e){return t.components.has(this.vnode.tagName)?this._renderComponent(t,e):this._renderElement(t,e)},t.prototype._renderElement=function(t,e){var n=this.vnode.render(t,e);return e.push(new u(n,this.bindingClass,t)),n},t.prototype._renderComponent=function(t,e){var n=[],r=this.vnode.render(t,n);return e.push(new s(n[0],this.bindingClass,t)),r},t}();e.Dynamic=o,e.dynamic=function(t,e){return new o(t,e)};var s=function(){function t(e,n,i){r(this,t),this.renderer=e,this.bindingClass=n,this.options=i}return t.prototype.generate=function(t,e){this.renderer.generate(t,e);var n=e.bindings[e.bindings.length-1];e.bindings.splice(e.bindings.indexOf(n),0,new this.bindingClass(n,e))},t}(),u=function(){function t(e,n,i){r(this,t),this.ref=e,this.bindingClass=n,this.options=i}return t.prototype.generate=function(t,e){this._refPath||(this._refPath=i.getNodePath(this.ref)),e.bindings.push(new this.bindingClass(i.getNodeByPath(t,this._refPath),e))},t}()},function(t,e){"use strict";function n(t,e){for(var n=t,r=0,i=e.length;i>r;r++)n=n.childNodes[e[r]];return n}function r(t){for(var e=[],n=t.parentNode,r=t;n;)for(e.unshift(Array.prototype.indexOf.call(n.childNodes,r)),r=n,n=n.parentNode;n&&n.nodeType>12;)n=n.parentNode;return e}e.getNodeByPath=n,e.getNodePath=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n,r){for(var i in n){var o=e.attributes.get(i),s=new o(t,i,n[i],r);s.update&&r.bindings.push(s)}}var o=n(7),s=n(8),u=n(9),a=function(){function t(e,n,i){r(this,t),this.nodeType=1,this.tagName=String(e).toLocaleLowerCase(),this.childNodes=i,this.attributes=n||{};for(var o=0;o<i.length;o++)i[o].parentNode=this}return t.prototype.render=function(t,e){var n=t.components;return n.has(this.tagName)?this._renderComponent(n.get(this.tagName),t,e):this._renderElement(t,e)},t.prototype.setAttributes=function(t,e){"string"==typeof t?this.attributes[t]=e:o.extend(this.attributes,t)},t.prototype._renderComponent=function(t,e,n){var r=new s.FragmentSection(e.document);return n.push(new c(t,r,this,this._splitAttributes(e),e)),r.render()},t.prototype._renderElement=function(t,e){var n=t.document.createElement(this.tagName),r=this._splitAttributes(t);for(var i in r.staticAttributes)n.setAttribute(i,r.staticAttributes[i]);for(var o=this.childNodes,s=Array.isArray(o),a=0,o=s?o:o[Symbol.iterator]();;){var c;if(s){if(a>=o.length)break;c=o[a++]}else{if(a=o.next(),a.done)break;c=a.value}var f=c;n.appendChild(f.render(t,e))}return Object.keys(r.dynamicAttributes).length&&e.push(new l(new u.NodeSection(t.document,n),t,r.dynamicAttributes)),n},t.prototype._splitAttributes=function(t){var e={},n={};if(t.attributes)for(var r in this.attributes){var i=t.attributes.get(r);!i||i.test&&!i.test(this,r,this.attributes[r])?n[r]=this.attributes[r]:e[r]=this.attributes[r]}else n=this.attributes;return{dynamicAttributes:e,staticAttributes:n}},t}();e.Element=a,e.element=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return new a(t,e,r)};var c=function(){function t(e,n,i,o,s){r(this,t),this.section=n,this.componentClass=e,this.element=i,this.options=s,this.attributes=o.staticAttributes,this.dynamicAttributes=o.dynamicAttributes}return t.prototype.generate=function(t,e){this._marker||(this._marker=this.section.createMarker());var n=new this.componentClass(this._marker.createSection(t),this.element,this.attributes,e);Object.keys(this.dynamicAttributes).length&&i(n,this.options,this.dynamicAttributes,e),n.update&&e.bindings.push(n)},t}(),l=function(){function t(e,n,i){r(this,t),this.section=e,this.options=n,this.attributes=i}return t.prototype.generate=function(t,e){this._marker||(this._marker=this.section.createMarker()),i(this._marker.findNode(t),this.options,this.attributes,e)},t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){for(var e=void 0,n=void 0,r=arguments.length,i=Array(r>1?r-1:0),o=1;r>o;o++)i[o-1]=arguments[o];for(var s=i,u=Array.isArray(s),a=0,s=u?s:s[Symbol.iterator]();;){if(u){if(a>=s.length)break;e=s[a++]}else{if(a=s.next(),a.done)break;e=a.value}if(e===Object(e))for(n in e)t[n]=e[n]}return t}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return Array.prototype.slice.apply(t,n)}function o(t,e,n){var i;i=e&&Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(){return t.apply(this,arguments)},r(i,t,n);var o=function(){this.constructor=i};return o.prototype=t.prototype,i.prototype=new o,e&&r(i.prototype,e),i.__super__=t.prototype,i}function s(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;n>o;o++)r[o-2]=arguments[o];if("function"!=typeof t)throw new Error("method not at function");if(null!=c)return c.call.apply(c,[t,e].concat(r));r=r||[];var s=function(){},u=function(){var n=this instanceof s?this:e;return t.apply(n,r.concat(i(arguments)))};return s.prototype=this.prototype,u.prototype=new s,u}function u(t){return l.create(t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.extend=r,e.slice=i,e.extendClass=o;var c=Function.prototype.bind;e.bind=s;var l=function(){function t(e){n(this,t),this.enabled=!1,this.namespace=e}return t.enable=function(t,e){for(var n in this.loggers)e&&n===e?this.loggers[n].enabled=t:e||(this.loggers[n].enabled=t)},t.create=function(e){var n=void 0;return this.loggers[e]?n=this.loggers[e].debug:(n=new t(e),this.loggers[e]=n),s(n.debug,n)},t.prototype.debug=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(this.enabled){n[0]=this._coerce(n[0]),"string"!=typeof n[0]&&(n=["%o"].concat(n));var i=0;n[0]=n[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;i++;var o=t.formatters[r];if("function"==typeof o){var s=n[i];e=o.call(self,s),n.splice(i,1),i--}return e}),n=this._formatArgs(n),this._log.apply(this,n)}},t.prototype._log=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return"object"===("undefined"==typeof console?"undefined":a(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.prototype._coerce=function(t){return t instanceof Error?t.stack||t.message:t},t.prototype._formatArgs=function(t){return t[0]="[templ:"+this.namespace+"] "+t[0],t},t}();l.loggers={},l.formatters={j:function(t){return JSON.stringify(t)}},e.Debug=l,e.debug=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(5),o=function(){function t(e,n,i){if(r(this,t),this.document=e,this.start=n||e.createTextNode(""),this.end=i||e.createTextNode(""),!this.start.parentNode){var o=e.createDocumentFragment();o.appendChild(this.start),o.appendChild(this.end)}}return t.prototype.appendChild=function(t){this.end.parentNode.insertBefore(t,this.end)},t.prototype.render=function(){return this.start.parentNode},t.prototype.remove=function(){var t=this.removeChildNodes();return t.insertBefore(this.start,t.childNodes[0]),t.appendChild(this.end),this},t.prototype.removeChildNodes=function(){for(var t=this.document.createDocumentFragment(),e=this.start,n=e.nextSibling,r=this.end;n!==r;)t.appendChild(n),n=e.nextSibling;return t},t.prototype.createMarker=function(){return new s(this.document,i.getNodePath(this.start),i.getNodePath(this.end))},t.prototype.clone=function(){var e;if(11===this.start.parentNode.nodeType)e=this.start.parentNode.cloneNode(!0);else{e=this.document.createDocumentFragment();for(var n=this._getChildNodes(),r=n.length,i=0;r>i;i++)e.appendChild(n[i].cloneNode(!0))}var o=e.childNodes[0],s=e.childNodes[e.childNodes.length-1];return new t(this.document,o,s)},t.prototype._getChildNodes=function(){for(var t=this.start,e=this.end.nextSibling,n=[];t!==e;)n.push(t),t=t.nextSibling;return n},t}();e.FragmentSection=o;var s=function(){function t(e,n,i){r(this,t),this.document=e,this.startPath=n,this.endPath=i}return t.prototype.createSection=function(t){return new o(this.document,i.getNodeByPath(t,this.startPath),i.getNodeByPath(t,this.endPath))},t}();e.FragmentSectionMarker=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(5),o=function(){function t(e,n){r(this,t),this.document=e,this.node=n}return t.prototype.createMarker=function(){return new s(this.document,i.getNodePath(this.node))},t.prototype.appendChild=function(t){this.node.appendChild(t)},t.prototype.render=function(){return this.node},t.prototype.remove=function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},t.prototype.removeChildren=function(){for(;this.node.childNodes.length;)this.node.removeChild(this.node.childNodes[0])},t.prototype.clone=function(){return new t(this.document,this.node.cloneNode(!0))},t}();e.NodeSection=o;var s=function(){function t(e,n){r(this,t),this.document=e,this.path=n}return t.prototype.createSection=function(t){return new o(this.document,this.findNode(t))},t.prototype.findNode=function(t){return i.getNodeByPath(t,this.path)},t}();e.NodeSectionMarker=s},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.nodeType=11,this.childNodes=e;for(var r=0;r<e.length;r++)e[r].parentNode=this}return t.prototype.render=function(t,e){for(var n=t.document.createDocumentFragment(),r=0,i=this.childNodes.length;i>r;r++)n.appendChild(this.childNodes[r].render(t,e));return n},t}();e.Fragment=r,e.fragment=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t,e){var n=void 0;if(11==e.nodeType){var r=new i.FragmentSection(t);r.appendChild(e),n=r}else n=new o.NodeSection(t,e);return n}var i=n(8),o=n(9);e.section=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return new u(t,e)}var o=n(11),s=n(13),u=function(){function t(e,n){r(this,t),this._renderers=[],this.vnode=e;var i=e.render(n,this._renderers);this.section=o.section(n.document,i),this.options=n}return t.prototype.view=function e(t,n){for(var r=this.section.clone(),i=this.options.viewClass||s.View,e=new i(r,this,t,n),o=this._renderers,u=Array.isArray(o),a=0,o=u?o:o[Symbol.iterator]();;){var c;if(u){if(a>=o.length)break;c=o[a++]}else{if(a=o.next(),a.done)break;c=a.value}var l=c;l.generate(r.node||r.start.parentNode,e)}return e},t}();e.Template=u,e.template=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,r,i,o){n(this,t),this.section=e,this.template=r,this.context=i,this.bindings=[]}return t.prototype.update=function(){for(var t=this.bindings,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;i.update()}},t.prototype.addListener=function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];return t.addEventListener(e,n,r),n},t.prototype.removeListener=function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];t.removeEventListener(e,n,r)},t.prototype.render=function(){return this.section.render()},t.prototype.remove=function(){for(var t=this.bindings,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;i.destroy()}return this.section.remove()},t}();e.View=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){n(this,t),this.nodeType=-201,this.nodeValue=e}return t.prototype.render=function(t){return t.document.createTextNode(this.nodeValue)},t}();e.Text=r,e.text=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(16)),r(n(17))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(12),o=n(10),s=function(){function t(e,n,s,u){r(this,t),this.section=e,this.vnode=n,this.attributes=s,this.view=u,this.document=u.template.options.document,n.childNodes&&(this.childTemplate=i.template(o.fragment(n.childNodes),u.template.options));for(var a in s)this.setAttribute(a,s[a]);this.initialize()}return t.prototype.initialize=function(){},t.prototype.setAttribute=function(t,e){this.attributes[t]=e},t.prototype.removeAttribute=function(t){this.attributes[t]=void 0},t.prototype.destroy=function(){},t}();e.BaseComponent=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(t)if(t.forEach)t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}var u=n(16),a=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u._children=[],u}return o(e,t),e.prototype.update=function(){var t,e=this.as,n=this.each,r=this.key||"key",i=0,o=this,u=this.view;s(n,function(n,s){var a;e?(t={},t[r]=s,t[e]=n):t=n,i>=o._children.length?(a=o.childTemplate.view(t,{parent:u}),o._children.push(a),o.section.appendChild(a.render(t))):(a=o._children[i],a.context=t,a.update()),i++}),this._children.splice(i).forEach(function(t){t.remove()})},e.prototype.setAttribute=function(t,e){this[t]=e},e}(u.BaseComponent);e.Repeat=a,e.repeat=a},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=n(19),o=n(22),s=n(23),u=n(24);r(n(20)),e.value=i.ValueAttribute,e.onclick=o.ClickAttribute,e.onenter=o.OnEnterAttribute,e.onescape=o.OnEscapeAttribute,e.checked=i.ValueAttribute,e.style=s.StyleAttribute,e.focus=u.FocusAttribute},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(20),u=n(21),a=n(7),c=["change","keyup","input"],l=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._onInput=a.bind(this._onInput,this,null);for(var t=c,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;this.ref.addEventListener(i,this._onInput)}},e.prototype.update=function(){var t=this.model=this.value;if(t){if(!(t&&t instanceof u.Reference))throw new Error("input value must be a reference. Make sure you have <~> defined");t.gettable&&this._elementValue(this._parseValue(t.value()))}},e.prototype._parseValue=function(t){return null!=t&&""!==t?t:void 0},e.prototype._onInput=function(t){clearInterval(this._autocompleteCheckInterval),!t||t.keyCode&&~[27].indexOf(t.keyCode)||t.stopPropagation();var e=this._parseValue(this._elementValue());this.model&&String(this.model.value())!=String(e)&&this.model.value(e)},e.prototype._elementValue=function(t){var e=this.ref,n=/checkbox/.test(e.type),r=/radio/.test(e.type),i=n||r,o=Object.prototype.hasOwnProperty.call(e,"value"),s=o||/input|textarea|checkbox/.test(e.nodeName.toLowerCase());return arguments.length?(null==t?t="":clearInterval(this._autocompleteCheckInterval),void(i?r?String(t)===String(e.value)&&(e.checked=!0):e.checked=t:String(t)!==this._elementValue()&&(s?e.value=t:e.innerHTML=t))):n?Boolean(e.checked):s?e.value||"":e.innerHTML||""},e}(s.BaseAttribute);e.ValueAttribute=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,r,i,o){n(this,t),this.ref=e,this.key=r,this.value=i,this.view=o,this.initialize()}return t.prototype.initialize=function(){},t.prototype.update=function(){},t.prototype.destroy=function(){},t.test=function(){},t}();e.BaseAttribute=r},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){for(var r,i="string"==typeof e?e.split("."):e,o=t,s=0,u=i.length-1;u>s;s++)r=i[s],o[r]||(o[r]={}),o=o[r];return o[i[i.length-1]]=n,n}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(7),c=n(2),l=a.debug("view"),f=function(){function t(e,n,r,i){o(this,t),this.gettable=r,this.settable=i,this.view=e,this.path=n}return t.prototype.value=function(t){return 0===arguments.length?this.gettable?this.view.get(this.path):void 0:void(this.settable&&this.view.set(this.path,t))},t.prototype.toString=function(){return this.view.get(this.path)||""},t}();e.Reference=f;var p=function(){function t(e,n,r){o(this,t),this.view=e,this.path=n,this.value=r,this.assign=a.bind(this.assign,this),this.toString=a.bind(this.toString,this)}return t.prototype.assign=function(t){this.view.set(this.path,this.value.call(this))},t.prototype.toString=function(){var t=this.value.call(this);return t?String(t):""},t}();e.Assignment=p;var h=function(t){function e(n,i,s){var u=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];o(this,e);var a=r(this,t.call(this,n,i,s,u));return a.context=s,a._callers={},a._getters={},u.parent&&(a.parent=u.parent),u.delegator&&(a._delegator=u.delegator),a}return i(e,t),e.prototype.getDelegator=function(){if(this._delegator)return this._delegator;for(var t=this.parent;void 0!=t;){if(t._delegator)return t._delegator;t=t.parent}return null},e.prototype.addListener=function(e,n,r){var i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=this.getDelegator();return o?o.addListener(e,n,r,i):"function"==typeof r?t.prototype.addListener.call(this,e,n,r,i):void 0},e.prototype.removeListener=function(e,n,r){var i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=null;o?o.removeListener(e,n,r,i):"function"==typeof r&&t.prototype.removeListener.call(this,e,n,r,i)},e.prototype.get=function(t){if(this.context){var e,n="string"!=typeof t?t.join("."):t;try{var r;(r=this._getters[n])||(r=this._getters[n]=new Function("return this."+n)),e=r.call(this.context)}catch(i){e=void 0}return e=void 0!=e?e:this.parent?this.parent.get(t):void 0,l('get value "%s": %s',t,e),e}},e.prototype.set=function(t,e){if(l("set value %s on context %j",e,this.context),this.context){"string"==typeof t&&(t=t.split("."));s(this.context,t,e);this.update()}},e.prototype.render=function(){this.update();var e=t.prototype.render.call(this);return e},e.prototype.ref=function(t,e,n){return l("reference %s, gettable: %o, settabble: %o",t,e,n),new f(this,t,e,n)},e.prototype.assign=function(t,e){return l("assignment %s %s",t,e),new p(this,t,e)},e.prototype.call=function(t,e){var n,r;if(l('call keypath "%s", args: "%o"',t,e),"string"!=typeof t&&(t=t.join(".")),!(n=this._callers[t])){var i=["this"].concat(t.split("."));i.pop(),n=this._callers[t]=new Function("params","return this."+t+".apply("+i.join(".")+", params);")}try{r=n.call(this.context,e)}catch(o){console.error("could not call",o)}return void 0!=r?r:this.parent?this.parent.call(t,e):void 0},u(e,[{key:"root",get:function(){if(null==this.parent)return this;for(var t=this,e=t;e;)e=e.parent,e&&(t=e);return t}}]),e}(c.View);e.View=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(20),a=n(21),c=n(7),l=c.debug("attributes:event"),f=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._onEvent=c.bind(this._onEvent,this)},e.prototype._onEvent=function(t){var e=void 0;if(e=this.value instanceof a.Assignment?this.value.assign:this.value,"function"!=typeof e)throw new Error("[event] value is not a function");l("fired event: %s",this._event),e(t)},e.prototype.destroy=function(){l("removed event listener %s: %o",this._event,this.value),this.view.removeListener(this.ref,this._event,this._onEvent)},s(e,[{key:"event",set:function(t){this._event&&(l("added event listener %s: %o",this._event,this.value),this.view.removeListener(this.ref,this._event,this._onEvent)),this._event=t,l("added event listener %s: %o",this._event,this.value),this.view.addListener(this.ref,this._event,this._onEvent)},get:function(){return this._event}}]),e}(u.BaseAttribute);e.EventAttribute=f;var p=function(t){function e(n,o,s,u){r(this,e);var a=i(this,t.call(this,n,o,s,u));return a.keyCodes=[],a.event="keydown",a}return o(e,t),e.prototype._onEvent=function(e){~this.keyCodes.indexOf(e.keyCode)&&t.prototype._onEvent.call(this,e)},e}(f);e.KeyCodeAttribute=p;var h=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u.event="click",u}return o(e,t),e}(f);e.ClickAttribute=h;var d=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u.keyCodes=[13],u}return o(e,t),e}(p);e.OnEnterAttribute=d;var v=function(t){function e(){r(this,e);for(var n=arguments.length,o=Array(n),s=0;n>s;s++)o[s]=arguments[s];var u=i(this,t.call.apply(t,[this].concat(o)));return u.KeyCodes=[27],u}return o(e,t),e}(p);e.OnEscapeAttribute=v},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(20),u=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){this._currentStyles={}},e.prototype.update=function(){var t=this.value;if("string"==typeof t)return void this.ref.setAttribute("style",t);var e={};for(var n in t){var r=t[n];r!==this._currentStyles[n]&&(e[n]=this._currentStyles[n]=r||"")}for(var i in e)this.ref.style[i]=e[i]},e}(s.BaseAttribute);e.StyleAttribute=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(20),u=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.initialize=function(){},e.prototype.update=function(){if(this.value&&this.ref.focus){var t=this;setTimeout(function(){t.ref.focus()},1)}},e}(s.BaseAttribute);e.FocusAttribute=u},function(t,e){"use strict";function n(t){return String(t).toUpperCase()}function r(t){return String(t).toLowerCase()}function i(t){var e;return e=String(t),e.substr(0,1).toUpperCase()+e.substr(1)}function o(t,e,n){return JSON.stringify.apply(JSON,arguments)}function s(t){return s(t)}e.uppercase=n,e.lowercase=r,e.titlecase=i,e.json=o,e.isNaN=s,e.round=Math.round},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=o(t);return new Function("return "+n)()}function o(t){var e=new a;return e.transpile(t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},u=n(27);e.compile=i,e.transpile=o;var a=function(){function t(){r(this,t);for(var e in this)"_"===e.charAt(0)&&(this[e]=this[e].bind(this));this.transpile=this.transpile.bind(this)}return t.prototype.transpile=function(t){return this._root(u.parser.parse(t))},t.prototype._root=function(t){var e="(function(fragment, element, text, comment, dynamic, createBindingClass) {",n="fragment(["+this._children(t)+"])";return e+="'use strict';return "+n,e+="})"},t.prototype._expression=function(t){return this["_"+t[0]](t)},t.prototype._element=function(t){var e={},n=[];return t[2].forEach(function(r,i){var o=r[1],s=r[2],u=o.split(".");u.length>1?(e[u[0]]||(t=e[u[0]]=["element",u[0],[],[["element",t[1],n,t[3]]]]),e[u[0]][2].push([r[0],u[1],s])):n.push(r)}),this._element2(t)},t.prototype._doctype=function(t){return"text('<!DOCTYPE "+t[1]+">')"},t.prototype._children=function(t){for(t=t.concat();t.length;){var e=t[t.length-1];if("text"!==e[0])break;if(e[1]=e[1].replace(/[\s\r\n\t]+$/,""),!/^[\s\r\n\t]*$/.test(e[1]))break;t.pop()}return t.map(this._expression).join(", ")},t.prototype._element2=function(t){var e="element('"+t[1]+"'",n=[];e+=", {";e+=t[2].map(function(t){var e=t[1],r=t[2];return!r.length||1===r.length&&"string"===r[0][0]?"'"+e+"':"+(r.length?this._expression(r[0]):"true"):void n.push(t)}.bind(this)).filter(function(t){return!!t}).join(","),e+="}";var r=this._children(t[3]);if(r.length&&(e+=", "+r),e+=")",n.length){var i="",o="";n.forEach(function(t){var e=t[0];if(i+="this","block"===e)i+=".ref.nodeValue = "+this._expression(t[1]);else if("attribute"===e){var n=t[2].map(function(t){return"("+this._expression(t)+")"}.bind(this)).join("+");i+=".setAttribute('"+t[1]+"', "+n+");"}else"property"===e&&(i+=".setProperty('"+t[1]+"', "+this._expression(t[2])+");")}.bind(this)),i.length&&(i="function(context) {"+i+"}"),o.length&&(o="function() { var self = this; "+o+"}"),(i.length||o.length)&&(e="dynamic("+e+",",e+="createBindingClass("+(o.length?o:"void 0")+", "+(i?i:"void 0")+")",e+=")")}return e},t.prototype.__addReference=function(t){var e="_"+ ++this._refCounter;return this._refs[e]=t,e},t.prototype._block=function(t){var e="dynamic(text(), createBindingClass(void 0, function(context) {";return e+="this.ref.nodeValue = "+this._expression(t[1])+";",e+"}))"},t.prototype._text=function(t){return"text('"+t[1]+"')"},t.prototype._comment=function(t){return"comment('"+t[1]+"')"},t.prototype._hash=function(t){var e=t[1],n=[];for(var r in e)n.push("'"+r+"':"+this._expression(e[r]));return"{"+n.join(",")+"}"},t.prototype._script=function(t){return this._expression(t[1])},t.prototype._referenceKeyPath=function(t){var e=[],n=!1;return t.forEach(function(t){"string"!=typeof t?(n=!0,e.push(this._expression(t))):e.push(t)}.bind(this)),e=n?"["+e.map(function(e,n){return"string"==typeof t[n]?"'"+e+"'":e}).join(",")+"]":"'"+e.join(".")+"'"},t.prototype._reference=function(t){var e=this._referenceKeyPath(t[1]);if(t[2]){var n=!!~t[2].indexOf("<~"),r=!!~t[2].indexOf("~>");return"this.view.ref("+e+", "+n+", "+r+")"}return"this.view.get("+e+")"},t.prototype._string=function(t){return"'"+t[1]+"'"},t.prototype._operator=function(t){return this._expression(t[2])+t[1]+this._expression(t[3])},t.prototype._condition=function(t){return this._expression(t[1])+"?"+this._expression(t[2])+":"+this._expression(t[3]);
},t.prototype._literal=function(t){return t[1]},t.prototype._not=function(t){return"!"+this._expression(t[1])},t.prototype._negative=function(t){return"-"+this._expression(t[1])},t.prototype._call=function(t){var e="this.view.call("+this._referenceKeyPath(t[1][1])+", [";return e+=t[2].map(this._expression).join(","),e+"])"},t.prototype._modifier=function(t){return"this.options.modifiers."+t[1]+"("+t[2].map(this._expression).join(",")+")"},t.prototype._assign=function(t){return'this.view.assign("'+t[1][1]+'", function () { return '+this._expression(t[2])+";})"},t.prototype._group=function(t){return"("+this._expression(t[1])+")"},t.prototype.__findExpressions=function(t,e){var n=[];return this.__traverse(e,function(e){e[0]===t&&n.push(e)}),n},t.prototype.__traverse=function(t,e){e(t),t.forEach(function(t){t&&"object"===("undefined"==typeof t?"undefined":s(t))&&this.__traverse(t,e)}.bind(this))},t}()},function(t,e){"use strict";e.parser=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,n,r,i){this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function n(t){function n(){return t.substring(Ei,Ci)}function r(e){throw u(null,[{type:"other",description:e}],t.substring(Ei,Ci),o(Ei,Ci))}function i(e){var n,r,i=Ni[e];if(i)return i;for(n=e-1;!Ni[n];)n--;for(i=Ni[n],i={line:i.line,column:i.column,seenCR:i.seenCR};e>n;)r=t.charAt(n),"\n"===r?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return Ni[e]=i,i}function o(t,e){var n=i(t),r=i(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function s(t){ki>Ci||(Ci>ki&&(ki=Ci,Si=[]),Si.push(t))}function u(t,n,r,i){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var r,i,o,s=new Array(t.length);for(o=0;o<t.length;o++)s[o]=t[o].description;return r=t.length>1?s.slice(0,-1).join(", ")+" or "+s[t.length-1]:s[0],i=e?'"'+n(e)+'"':"end of input","Expected "+r+" but "+i+" found."}return null!==n&&o(n),new e(null!==t?t:s(n,r),n,r,i)}function a(){var t,e=59*Ci+0,n=ji[e];return n?(Ci=n.nextPos,n.result):(t=c(),ji[e]={nextPos:Ci,result:t},t)}function c(){var t,e,n=59*Ci+1,r=ji[n];return r?(Ci=r.nextPos,r.result):(t=Ci,e=f(),e!==mt&&(Ei=t,e=At(e)),t=e,ji[n]={nextPos:Ci,result:t},t)}function l(){var e,n,r,i,o,u,a=59*Ci+2,c=ji[a];if(c)return Ci=c.nextPos,c.result;if(e=Ci,t.substr(Ci,9)===wt?(n=wt,Ci+=9):(n=mt,0===Oi&&s(Pt)),n!==mt)if(r=ft(),r!==mt){if(i=[],Ct.test(t.charAt(Ci))?(o=t.charAt(Ci),Ci++):(o=mt,0===Oi&&s(Et)),o!==mt)for(;o!==mt;)i.push(o),Ct.test(t.charAt(Ci))?(o=t.charAt(Ci),Ci++):(o=mt,0===Oi&&s(Et));else i=mt;i!==mt?(o=ft(),o!==mt?(62===t.charCodeAt(Ci)?(u=Nt,Ci++):(u=mt,0===Oi&&s(kt)),u!==mt?(Ei=e,n=St(i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)}else Ci=e,e=mt;else Ci=e,e=mt;return ji[a]={nextPos:Ci,result:e},e}function f(){var t,e,n,r=59*Ci+3,i=ji[r];if(i)return Ci=i.nextPos,i.result;for(t=Ci,e=[],n=v(),n===mt&&(n=h(),n===mt&&(n=b(),n===mt&&(n=p(),n===mt&&(n=g(),n===mt&&(n=S())))));n!==mt;)e.push(n),n=v(),n===mt&&(n=h(),n===mt&&(n=b(),n===mt&&(n=p(),n===mt&&(n=g(),n===mt&&(n=S())))));return e!==mt&&(Ei=t,e=Ot(e)),t=e,ji[r]={nextPos:Ci,result:t},t}function p(){var e,n,r,i,o,u,a,c=59*Ci+4,f=ji[c];if(f)return Ci=f.nextPos,f.result;if(e=Ci,n=ft(),n!==mt)if(t.substr(Ci,4)===jt?(r=jt,Ci+=4):(r=mt,0===Oi&&s(Tt)),r!==mt){if(i=[],o=Ci,u=Ci,Oi++,t.substr(Ci,3)===Bt?(a=Bt,Ci+=3):(a=mt,0===Oi&&s(Ft)),Oi--,a===mt?u=void 0:(Ci=u,u=mt),u!==mt?(a=lt(),a!==mt?(Ei=o,u=Rt(a),o=u):(Ci=o,o=mt)):(Ci=o,o=mt),o!==mt)for(;o!==mt;)i.push(o),o=Ci,u=Ci,Oi++,t.substr(Ci,3)===Bt?(a=Bt,Ci+=3):(a=mt,0===Oi&&s(Ft)),Oi--,a===mt?u=void 0:(Ci=u,u=mt),u!==mt?(a=lt(),a!==mt?(Ei=o,u=Rt(a),o=u):(Ci=o,o=mt)):(Ci=o,o=mt);else i=mt;i!==mt?(t.substr(Ci,3)===Bt?(o=Bt,Ci+=3):(o=mt,0===Oi&&s(Ft)),o!==mt?(u=ft(),u!==mt?(Ei=e,n=Lt(i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)}else Ci=e,e=mt;else Ci=e,e=mt;return e===mt&&(e=l()),ji[c]={nextPos:Ci,result:e},e}function h(){var e,n,r,i,o,u,a,c,l=59*Ci+5,f=ji[l];if(f)return Ci=f.nextPos,f.result;if(e=Ci,n=ft(),n!==mt)if(t.substr(Ci,7)===Vt?(r=Vt,Ci+=7):(r=mt,0===Oi&&s(zt)),r!==mt)if(i=w(),i!==mt)if(62===t.charCodeAt(Ci)?(o=Nt,Ci++):(o=mt,0===Oi&&s(kt)),o!==mt){if(u=[],a=d(),a!==mt)for(;a!==mt;)u.push(a),a=d();else u=mt;u!==mt?(t.substr(Ci,9)===Dt?(a=Dt,Ci+=9):(a=mt,0===Oi&&s(It)),a!==mt?(c=ft(),c!==mt?(Ei=e,n=$t(i,u),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)}else Ci=e,e=mt;else Ci=e,e=mt;else Ci=e,e=mt;else Ci=e,e=mt;return ji[l]={nextPos:Ci,result:e},e}function d(){var e,n,r,i=59*Ci+6,o=ji[i];return o?(Ci=o.nextPos,o.result):(e=Ci,n=Ci,Oi++,t.substr(Ci,9)===Dt?(r=Dt,Ci+=9):(r=mt,0===Oi&&s(It)),Oi--,r===mt?n=void 0:(Ci=n,n=mt),n!==mt?(r=lt(),r!==mt?(Ei=e,n=Mt(),e=n):(Ci=e,e=mt)):(Ci=e,e=mt),ji[i]={nextPos:Ci,result:e},e)}function v(){var e,n,r,i,o,u,a=59*Ci+7,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,60===t.charCodeAt(Ci)?(n=Ut,Ci++):(n=mt,0===Oi&&s(Zt)),n!==mt?(t.substr(Ci,4)===Kt?(r=Kt,Ci+=4):(r=mt,0===Oi&&s(Yt)),r===mt&&(t.substr(Ci,4)===Jt?(r=Jt,Ci+=4):(r=mt,0===Oi&&s(Ht)),r===mt&&(t.substr(Ci,2)===qt?(r=qt,Ci+=2):(r=mt,0===Oi&&s(Gt)),r===mt&&(t.substr(Ci,3)===Qt?(r=Qt,Ci+=3):(r=mt,0===Oi&&s(Wt)),r===mt&&(t.substr(Ci,7)===Xt?(r=Xt,Ci+=7):(r=mt,0===Oi&&s(te)),r===mt&&(t.substr(Ci,5)===ee?(r=ee,Ci+=5):(r=mt,0===Oi&&s(ne)),r===mt&&(t.substr(Ci,2)===re?(r=re,Ci+=2):(r=mt,0===Oi&&s(ie)),r===mt&&(t.substr(Ci,3)===oe?(r=oe,Ci+=3):(r=mt,0===Oi&&s(se)),r===mt&&(t.substr(Ci,5)===ue?(r=ue,Ci+=5):(r=mt,0===Oi&&s(ae)),r===mt&&(t.substr(Ci,6)===ce?(r=ce,Ci+=6):(r=mt,0===Oi&&s(le)),r===mt&&(t.substr(Ci,4)===fe?(r=fe,Ci+=4):(r=mt,0===Oi&&s(pe)),r===mt&&(t.substr(Ci,4)===he?(r=he,Ci+=4):(r=mt,0===Oi&&s(de)),r===mt&&(t.substr(Ci,5)===ve?(r=ve,Ci+=5):(r=mt,0===Oi&&s(ye)),r===mt&&(t.substr(Ci,6)===be?(r=be,Ci+=6):(r=mt,0===Oi&&s(ge)),r===mt&&(t.substr(Ci,5)===me?(r=me,Ci+=5):(r=mt,0===Oi&&s(xe)),r===mt&&(t.substr(Ci,3)===_e?(r=_e,Ci+=3):(r=mt,0===Oi&&s(Ae))))))))))))))))),r!==mt?(i=w(),i!==mt?(62===t.charCodeAt(Ci)?(o=Nt,Ci++):(o=mt,0===Oi&&s(kt)),o===mt&&(t.substr(Ci,2)===we?(o=we,Ci+=2):(o=mt,0===Oi&&s(Pe))),o===mt&&(o=null),o!==mt?(u=y(),u===mt&&(u=null),u!==mt?(Ei=e,n=Ce(r,i,u),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[a]={nextPos:Ci,result:e},e)}function y(){var e,n,r,i,o,u=59*Ci+8,a=ji[u];return a?(Ci=a.nextPos,a.result):(e=Ci,n=ft(),n!==mt?(t.substr(Ci,2)===Ee?(r=Ee,Ci+=2):(r=mt,0===Oi&&s(Ne)),r!==mt?(t.substr(Ci,4)===Kt?(i=Kt,Ci+=4):(i=mt,0===Oi&&s(Yt)),i===mt&&(t.substr(Ci,4)===Jt?(i=Jt,Ci+=4):(i=mt,0===Oi&&s(Ht)),i===mt&&(t.substr(Ci,2)===qt?(i=qt,Ci+=2):(i=mt,0===Oi&&s(Gt)),i===mt&&(t.substr(Ci,3)===Qt?(i=Qt,Ci+=3):(i=mt,0===Oi&&s(Wt)),i===mt&&(t.substr(Ci,7)===Xt?(i=Xt,Ci+=7):(i=mt,0===Oi&&s(te)),i===mt&&(t.substr(Ci,5)===ee?(i=ee,Ci+=5):(i=mt,0===Oi&&s(ne)),i===mt&&(t.substr(Ci,2)===re?(i=re,Ci+=2):(i=mt,0===Oi&&s(ie)),i===mt&&(t.substr(Ci,3)===oe?(i=oe,Ci+=3):(i=mt,0===Oi&&s(se)),i===mt&&(t.substr(Ci,5)===ue?(i=ue,Ci+=5):(i=mt,0===Oi&&s(ae)),i===mt&&(t.substr(Ci,6)===ce?(i=ce,Ci+=6):(i=mt,0===Oi&&s(le)),i===mt&&(t.substr(Ci,4)===fe?(i=fe,Ci+=4):(i=mt,0===Oi&&s(pe)),i===mt&&(t.substr(Ci,4)===he?(i=he,Ci+=4):(i=mt,0===Oi&&s(de)),i===mt&&(t.substr(Ci,5)===ve?(i=ve,Ci+=5):(i=mt,0===Oi&&s(ye)),i===mt&&(t.substr(Ci,6)===be?(i=be,Ci+=6):(i=mt,0===Oi&&s(ge)),i===mt&&(t.substr(Ci,5)===me?(i=me,Ci+=5):(i=mt,0===Oi&&s(xe)),i===mt&&(t.substr(Ci,3)===_e?(i=_e,Ci+=3):(i=mt,0===Oi&&s(Ae))))))))))))))))),i!==mt?(62===t.charCodeAt(Ci)?(o=Nt,Ci++):(o=mt,0===Oi&&s(kt)),o!==mt?(Ei=e,n=ke(i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[u]={nextPos:Ci,result:e},e)}function b(){var t,e,n,r,i=59*Ci+9,o=ji[i];return o?(Ci=o.nextPos,o.result):(t=Ci,e=x(),e!==mt?(n=f(),n!==mt?(r=P(),r!==mt?(Ei=t,e=Se(e,n,r),t=e):(Ci=t,t=mt)):(Ci=t,t=mt)):(Ci=t,t=mt),t===mt&&(t=_()),ji[i]={nextPos:Ci,result:t},t)}function g(){var t,e,n,r=59*Ci+10,i=ji[r];if(i)return Ci=i.nextPos,i.result;if(t=Ci,e=[],n=m(),n!==mt)for(;n!==mt;)e.push(n),n=m();else e=mt;return e!==mt&&(Ei=t,e=Oe(e)),t=e,ji[r]={nextPos:Ci,result:t},t}function m(){var e,n,r,i=59*Ci+11,o=ji[i];return o?(Ci=o.nextPos,o.result):(e=Ci,n=Ci,Oi++,60===t.charCodeAt(Ci)?(r=Ut,Ci++):(r=mt,0===Oi&&s(Zt)),r===mt&&(t.substr(Ci,2)===je?(r=je,Ci+=2):(r=mt,0===Oi&&s(Te))),Oi--,r===mt?n=void 0:(Ci=n,n=mt),n!==mt?(r=lt(),r!==mt?(Ei=e,n=Mt(),e=n):(Ci=e,e=mt)):(Ci=e,e=mt),ji[i]={nextPos:Ci,result:e},e)}function x(){var e,n,r,i,o,u,a=59*Ci+12,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,n=ft(),n!==mt?(60===t.charCodeAt(Ci)?(r=Ut,Ci++):(r=mt,0===Oi&&s(Zt)),r!==mt?(i=A(),i!==mt?(62===t.charCodeAt(Ci)?(o=Nt,Ci++):(o=mt,0===Oi&&s(kt)),o!==mt?(u=ft(),u!==mt?(Ei=e,n=Be(i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[a]={nextPos:Ci,result:e},e)}function _(){var e,n,r,i,o,u,a=59*Ci+13,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,n=ft(),n!==mt?(60===t.charCodeAt(Ci)?(r=Ut,Ci++):(r=mt,0===Oi&&s(Zt)),r!==mt?(i=A(),i!==mt?(t.substr(Ci,2)===we?(o=we,Ci+=2):(o=mt,0===Oi&&s(Pe)),o!==mt?(u=ft(),u!==mt?(Ei=e,n=Fe(i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[a]={nextPos:Ci,result:e},e)}function A(){var t,e,n,r=59*Ci+14,i=ji[r];return i?(Ci=i.nextPos,i.result):(t=Ci,e=C(),e!==mt?(n=w(),n!==mt?(Ei=t,e=Re(e,n),t=e):(Ci=t,t=mt)):(Ci=t,t=mt),ji[r]={nextPos:Ci,result:t},t)}function w(){var t,e,n,r,i=59*Ci+15,o=ji[i];if(o)return Ci=o.nextPos,o.result;if(t=Ci,e=ft(),e!==mt){for(n=[],r=E();r!==mt;)n.push(r),r=E();n!==mt?(r=ft(),r!==mt?(Ei=t,e=Le(n),t=e):(Ci=t,t=mt)):(Ci=t,t=mt)}else Ci=t,t=mt;return ji[i]={nextPos:Ci,result:t},t}function P(){var e,n,r,i,o=59*Ci+16,u=ji[o];return u?(Ci=u.nextPos,u.result):(e=Ci,t.substr(Ci,2)===Ee?(n=Ee,Ci+=2):(n=mt,0===Oi&&s(Ne)),n!==mt?(r=C(),r!==mt?(62===t.charCodeAt(Ci)?(i=Nt,Ci++):(i=mt,0===Oi&&s(kt)),i!==mt?(Ei=e,n=ke(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[o]={nextPos:Ci,result:e},e)}function C(){var e,n,r,i,o=59*Ci+17,u=ji[o];if(u)return Ci=u.nextPos,u.result;if(e=Ci,n=ft(),n!==mt){if(r=[],Ve.test(t.charAt(Ci))?(i=t.charAt(Ci),Ci++):(i=mt,0===Oi&&s(ze)),i!==mt)for(;i!==mt;)r.push(i),Ve.test(t.charAt(Ci))?(i=t.charAt(Ci),Ci++):(i=mt,0===Oi&&s(ze));else r=mt;r!==mt?(Ei=e,n=De(r),e=n):(Ci=e,e=mt)}else Ci=e,e=mt;return ji[o]={nextPos:Ci,result:e},e}function E(){var e,n,r,i,o,u,a=59*Ci+18,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,n=C(),n!==mt?(r=ft(),r!==mt?(61===t.charCodeAt(Ci)?(i=Ie,Ci++):(i=mt,0===Oi&&s($e)),i!==mt?(o=ft(),o!==mt?(u=N(),u!==mt?(Ei=e,n=Me(n,u),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(e=Ci,n=C(),n!==mt?(r=ft(),r!==mt?(61===t.charCodeAt(Ci)?(i=Ie,Ci++):(i=mt,0===Oi&&s($e)),i!==mt?(o=ft(),o!==mt?(u=k(),u!==mt?(Ei=e,n=Ue(n,u),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(e=Ci,n=C(),n!==mt&&(Ei=e,n=Ze(n)),e=n)),ji[a]={nextPos:Ci,result:e},e)}function N(){var e,n,r,i,o,u,a,c,l=59*Ci+19,f=ji[l];if(f)return Ci=f.nextPos,f.result;if(e=Ci,34===t.charCodeAt(Ci)?(n=Ke,Ci++):(n=mt,0===Oi&&s(Ye)),n!==mt){if(r=[],i=k(),i===mt){if(i=Ci,o=[],u=Ci,a=Ci,Oi++,t.substr(Ci,2)===je?(c=je,Ci+=2):(c=mt,0===Oi&&s(Te)),Oi--,c===mt?a=void 0:(Ci=a,a=mt),a!==mt?(Je.test(t.charAt(Ci))?(c=t.charAt(Ci),Ci++):(c=mt,0===Oi&&s(He)),c!==mt?(a=[a,c],u=a):(Ci=u,u=mt)):(Ci=u,u=mt),u!==mt)for(;u!==mt;)o.push(u),u=Ci,a=Ci,Oi++,t.substr(Ci,2)===je?(c=je,Ci+=2):(c=mt,0===Oi&&s(Te)),Oi--,c===mt?a=void 0:(Ci=a,a=mt),a!==mt?(Je.test(t.charAt(Ci))?(c=t.charAt(Ci),Ci++):(c=mt,0===Oi&&s(He)),c!==mt?(a=[a,c],u=a):(Ci=u,u=mt)):(Ci=u,u=mt);else o=mt;o!==mt&&(Ei=i,o=qe()),i=o}for(;i!==mt;)if(r.push(i),i=k(),i===mt){if(i=Ci,o=[],u=Ci,a=Ci,Oi++,t.substr(Ci,2)===je?(c=je,Ci+=2):(c=mt,0===Oi&&s(Te)),Oi--,c===mt?a=void 0:(Ci=a,a=mt),a!==mt?(Je.test(t.charAt(Ci))?(c=t.charAt(Ci),Ci++):(c=mt,0===Oi&&s(He)),c!==mt?(a=[a,c],u=a):(Ci=u,u=mt)):(Ci=u,u=mt),u!==mt)for(;u!==mt;)o.push(u),u=Ci,a=Ci,Oi++,t.substr(Ci,2)===je?(c=je,Ci+=2):(c=mt,0===Oi&&s(Te)),Oi--,c===mt?a=void 0:(Ci=a,a=mt),a!==mt?(Je.test(t.charAt(Ci))?(c=t.charAt(Ci),Ci++):(c=mt,0===Oi&&s(He)),c!==mt?(a=[a,c],u=a):(Ci=u,u=mt)):(Ci=u,u=mt);else o=mt;o!==mt&&(Ei=i,o=qe()),i=o}r!==mt?(34===t.charCodeAt(Ci)?(i=Ke,Ci++):(i=mt,0===Oi&&s(Ye)),i!==mt?(Ei=e,n=Ge(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)}else Ci=e,e=mt;if(e===mt)if(e=Ci,39===t.charCodeAt(Ci)?(n=Qe,Ci++):(n=mt,0===Oi&&s(We)),n!==mt){if(r=[],i=k(),i===mt){if(i=Ci,o=[],u=Ci,a=Ci,Oi++,t.substr(Ci,2)===je?(c=je,Ci+=2):(c=mt,0===Oi&&s(Te)),Oi--,c===mt?a=void 0:(Ci=a,a=mt),a!==mt?(Xe.test(t.charAt(Ci))?(c=t.charAt(Ci),Ci++):(c=mt,0===Oi&&s(tn)),c!==mt?(a=[a,c],u=a):(Ci=u,u=mt)):(Ci=u,u=mt),u!==mt)for(;u!==mt;)o.push(u),u=Ci,a=Ci,Oi++,t.substr(Ci,2)===je?(c=je,Ci+=2):(c=mt,0===Oi&&s(Te)),Oi--,c===mt?a=void 0:(Ci=a,a=mt),a!==mt?(Xe.test(t.charAt(Ci))?(c=t.charAt(Ci),Ci++):(c=mt,0===Oi&&s(tn)),c!==mt?(a=[a,c],u=a):(Ci=u,u=mt)):(Ci=u,u=mt);else o=mt;o!==mt&&(Ei=i,o=qe()),i=o}for(;i!==mt;)if(r.push(i),i=k(),i===mt){if(i=Ci,o=[],u=Ci,a=Ci,Oi++,t.substr(Ci,2)===je?(c=je,Ci+=2):(c=mt,0===Oi&&s(Te)),Oi--,c===mt?a=void 0:(Ci=a,a=mt),a!==mt?(Xe.test(t.charAt(Ci))?(c=t.charAt(Ci),Ci++):(c=mt,0===Oi&&s(tn)),c!==mt?(a=[a,c],u=a):(Ci=u,u=mt)):(Ci=u,u=mt),u!==mt)for(;u!==mt;)o.push(u),u=Ci,a=Ci,Oi++,t.substr(Ci,2)===je?(c=je,Ci+=2):(c=mt,0===Oi&&s(Te)),Oi--,c===mt?a=void 0:(Ci=a,a=mt),a!==mt?(Xe.test(t.charAt(Ci))?(c=t.charAt(Ci),Ci++):(c=mt,0===Oi&&s(tn)),c!==mt?(a=[a,c],u=a):(Ci=u,u=mt)):(Ci=u,u=mt);else o=mt;o!==mt&&(Ei=i,o=qe()),i=o}r!==mt?(39===t.charCodeAt(Ci)?(i=Qe,Ci++):(i=mt,0===Oi&&s(We)),i!==mt?(Ei=e,n=Ge(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)}else Ci=e,e=mt;return ji[l]={nextPos:Ci,result:e},e}function k(){var e,n,r,i,o,u,a=59*Ci+20,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,t.substr(Ci,2)===je?(n=je,Ci+=2):(n=mt,0===Oi&&s(Te)),n!==mt?(r=ft(),r!==mt?(i=O(),i!==mt?(o=ft(),o!==mt?(t.substr(Ci,2)===en?(u=en,Ci+=2):(u=mt,0===Oi&&s(nn)),u!==mt?(Ei=e,n=rn(i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[a]={nextPos:Ci,result:e},e)}function S(){var t,e,n=59*Ci+21,r=ji[n];return r?(Ci=r.nextPos,r.result):(t=Ci,e=k(),e!==mt&&(Ei=t,e=on(e)),t=e,ji[n]={nextPos:Ci,result:t},t)}function O(){var e,n,r,i,o,u,a=59*Ci+22,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,n=B(),n!==mt?(63===t.charCodeAt(Ci)?(r=sn,Ci++):(r=mt,0===Oi&&s(un)),r!==mt?(i=O(),i!==mt?(58===t.charCodeAt(Ci)?(o=an,Ci++):(o=mt,0===Oi&&s(cn)),o!==mt?(u=O(),u!==mt?(Ei=e,n=ln(n,i,u),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(e=B()),ji[a]={nextPos:Ci,result:e},e)}function j(){var e,n,r,i,o=59*Ci+23,u=ji[o];return u?(Ci=u.nextPos,u.result):(e=Ci,40===t.charCodeAt(Ci)?(n=fn,Ci++):(n=mt,0===Oi&&s(pn)),n!==mt?(r=T(),r!==mt?(41===t.charCodeAt(Ci)?(i=hn,Ci++):(i=mt,0===Oi&&s(dn)),i!==mt?(Ei=e,n=vn(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(e=Ci,t.substr(Ci,2)===yn?(n=yn,Ci+=2):(n=mt,0===Oi&&s(bn)),n!==mt&&(Ei=e,n=gn()),e=n),ji[o]={nextPos:Ci,result:e},e)}function T(){var e,n,r,i,o,u,a=59*Ci+24,c=ji[a];if(c)return Ci=c.nextPos,c.result;if(e=Ci,n=O(),n!==mt){for(r=[],i=Ci,44===t.charCodeAt(Ci)?(o=mn,Ci++):(o=mt,0===Oi&&s(xn)),o!==mt?(u=O(),u!==mt?(o=[o,u],i=o):(Ci=i,i=mt)):(Ci=i,i=mt);i!==mt;)r.push(i),i=Ci,44===t.charCodeAt(Ci)?(o=mn,Ci++):(o=mt,0===Oi&&s(xn)),o!==mt?(u=O(),u!==mt?(o=[o,u],i=o):(Ci=i,i=mt)):(Ci=i,i=mt);r!==mt?(Ei=e,n=_n(n,r),e=n):(Ci=e,e=mt)}else Ci=e,e=mt;return ji[a]={nextPos:Ci,result:e},e}function B(){var e,n,r,i,o=59*Ci+25,u=ji[o];return u?(Ci=u.nextPos,u.result):(e=Ci,n=z(),n!==mt?(61===t.charCodeAt(Ci)?(r=Ie,Ci++):(r=mt,0===Oi&&s($e)),r!==mt?(i=B(),i!==mt?(Ei=e,n=An(n,i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(e=F()),ji[o]={nextPos:Ci,result:e},e)}function F(){var e,n,r,i,o=59*Ci+26,u=ji[o];return u?(Ci=u.nextPos,u.result):(e=Ci,n=R(),n!==mt?(t.substr(Ci,2)===wn?(r=wn,Ci+=2):(r=mt,0===Oi&&s(Pn)),r===mt&&(t.substr(Ci,2)===Cn?(r=Cn,Ci+=2):(r=mt,0===Oi&&s(En)),r===mt&&(t.substr(Ci,3)===Nn?(r=Nn,Ci+=3):(r=mt,0===Oi&&s(kn)),r===mt&&(t.substr(Ci,2)===Sn?(r=Sn,Ci+=2):(r=mt,0===Oi&&s(On)),r===mt&&(t.substr(Ci,3)===jn?(r=jn,Ci+=3):(r=mt,0===Oi&&s(Tn)),r===mt&&(t.substr(Ci,2)===Bn?(r=Bn,Ci+=2):(r=mt,0===Oi&&s(Fn)),r===mt&&(t.substr(Ci,3)===Rn?(r=Rn,Ci+=3):(r=mt,0===Oi&&s(Ln)),r===mt&&(t.substr(Ci,2)===Vn?(r=Vn,Ci+=2):(r=mt,0===Oi&&s(zn)),r===mt&&(62===t.charCodeAt(Ci)?(r=Nt,Ci++):(r=mt,0===Oi&&s(kt)),r===mt&&(t.substr(Ci,3)===Dn?(r=Dn,Ci+=3):(r=mt,0===Oi&&s(In)),r===mt&&(t.substr(Ci,2)===$n?(r=$n,Ci+=2):(r=mt,0===Oi&&s(Mn)),r===mt&&(60===t.charCodeAt(Ci)?(r=Ut,Ci++):(r=mt,0===Oi&&s(Zt)),r===mt&&(43===t.charCodeAt(Ci)?(r=Un,Ci++):(r=mt,0===Oi&&s(Zn)),r===mt&&(45===t.charCodeAt(Ci)?(r=Kn,Ci++):(r=mt,0===Oi&&s(Yn)),r===mt&&(37===t.charCodeAt(Ci)?(r=Jn,Ci++):(r=mt,0===Oi&&s(Hn)),r===mt&&(42===t.charCodeAt(Ci)?(r=qn,Ci++):(r=mt,0===Oi&&s(Gn)),r===mt&&(47===t.charCodeAt(Ci)?(r=Qn,Ci++):(r=mt,0===Oi&&s(Wn)))))))))))))))))),r!==mt?(i=F(),i!==mt?(Ei=e,n=Xn(n,r,i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(e=R()),ji[o]={nextPos:Ci,result:e},e)}function R(){var t,e,n,r,i=59*Ci+27,o=ji[i];return o?(Ci=o.nextPos,o.result):(t=Ci,e=ft(),e!==mt?(n=L(),n!==mt?(r=ft(),r!==mt?(Ei=t,e=tr(n),t=e):(Ci=t,t=mt)):(Ci=t,t=mt)):(Ci=t,t=mt),ji[i]={nextPos:Ci,result:t},t)}function L(){var t,e,n,r,i=59*Ci+28,o=ji[i];if(o)return Ci=o.nextPos,o.result;if(t=Ci,e=D(),e!==mt){for(n=[],r=V();r!==mt;)n.push(r),r=V();n!==mt?(Ei=t,e=er(e,n),t=e):(Ci=t,t=mt)}else Ci=t,t=mt;return t===mt&&(t=G(),t===mt&&(t=z())),ji[i]={nextPos:Ci,result:t},t}function V(){var e,n,r,i,o,u,a=59*Ci+29,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,124===t.charCodeAt(Ci)?(n=nr,Ci++):(n=mt,0===Oi&&s(rr)),n!==mt?(r=ft(),r!==mt?(i=et(),i!==mt?(o=j(),o===mt&&(o=null),o!==mt?(u=ft(),u!==mt?(Ei=e,n=ir(i,o),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[a]={nextPos:Ci,result:e},e)}function z(){var t,e,n,r,i=59*Ci+30,o=ji[i];return o?(Ci=o.nextPos,o.result):(t=Ci,e=ft(),e!==mt?(n=I(),n!==mt?(r=ft(),r!==mt?(Ei=t,e=or(n),t=e):(Ci=t,t=mt)):(Ci=t,t=mt)):(Ci=t,t=mt),ji[i]={nextPos:Ci,result:t},t)}function D(){var e,n,r,i=59*Ci+31,o=ji[i];return o?(Ci=o.nextPos,o.result):(e=Ci,33===t.charCodeAt(Ci)?(n=sr,Ci++):(n=mt,0===Oi&&s(ur)),n!==mt?(r=D(),r!==mt?(Ei=e,n=ar(n,r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(e=Ci,33===t.charCodeAt(Ci)?(n=sr,Ci++):(n=mt,0===Oi&&s(ur)),n===mt&&(45===t.charCodeAt(Ci)?(n=Kn,Ci++):(n=mt,0===Oi&&s(Yn))),n!==mt?(r=D(),r!==mt?(Ei=e,n=cr(n,r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(e=Z(),e===mt&&(e=G(),e===mt&&(e=z())))),ji[i]={nextPos:Ci,result:e},e)}function I(){var t,e=59*Ci+32,n=ji[e];return n?(Ci=n.nextPos,n.result):(t=U(),t===mt&&(t=nt(),t===mt&&(t=$(),t===mt&&(t=ut(),t===mt&&(t=Q())))),ji[e]={nextPos:Ci,result:t},t)}function $(){var e,n,r,i,o,u,a=59*Ci+33,c=ji[a];if(c)return Ci=c.nextPos,c.result;if(e=Ci,n=Ci,45===t.charCodeAt(Ci)?(r=Kn,Ci++):(r=mt,0===Oi&&s(Yn)),r===mt&&(r=null),r!==mt){if(i=Ci,o=[],lr.test(t.charAt(Ci))?(u=t.charAt(Ci),Ci++):(u=mt,0===Oi&&s(fr)),u!==mt)for(;u!==mt;)o.push(u),lr.test(t.charAt(Ci))?(u=t.charAt(Ci),Ci++):(u=mt,0===Oi&&s(fr));else o=mt;o!==mt?(u=M(),u===mt&&(u=null),u!==mt?(o=[o,u],i=o):(Ci=i,i=mt)):(Ci=i,i=mt),i===mt&&(i=M()),i!==mt?(r=[r,i],n=r):(Ci=n,n=mt)}else Ci=n,n=mt;return n!==mt&&(Ei=e,n=pr(n)),e=n,ji[a]={nextPos:Ci,result:e},e}function M(){var e,n,r,i,o=59*Ci+34,u=ji[o];if(u)return Ci=u.nextPos,u.result;if(e=Ci,46===t.charCodeAt(Ci)?(n=hr,Ci++):(n=mt,0===Oi&&s(dr)),n!==mt){if(r=[],lr.test(t.charAt(Ci))?(i=t.charAt(Ci),Ci++):(i=mt,0===Oi&&s(fr)),i!==mt)for(;i!==mt;)r.push(i),lr.test(t.charAt(Ci))?(i=t.charAt(Ci),Ci++):(i=mt,0===Oi&&s(fr));else r=mt;r!==mt?(n=[n,r],e=n):(Ci=e,e=mt)}else Ci=e,e=mt;return ji[o]={nextPos:Ci,result:e},e}function U(){var e,n,r,i,o=59*Ci+35,u=ji[o];return u?(Ci=u.nextPos,u.result):(e=Ci,40===t.charCodeAt(Ci)?(n=fn,Ci++):(n=mt,0===Oi&&s(pn)),n!==mt?(r=O(),r!==mt?(41===t.charCodeAt(Ci)?(i=hn,Ci++):(i=mt,0===Oi&&s(dn)),i!==mt?(Ei=e,n=vr(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[o]={nextPos:Ci,result:e},e)}function Z(){var t,e,n=59*Ci+36,r=ji[n];return r?(Ci=r.nextPos,r.result):(t=Ci,e=K(),e===mt&&(e=Y(),e===mt&&(e=q(),e===mt&&(e=J(),e===mt&&(e=H())))),e!==mt&&(Ei=t,e=yr(e)),t=e,ji[n]={nextPos:Ci,result:t},t)}function K(){var e,n,r=59*Ci+37,i=ji[r];return i?(Ci=i.nextPos,i.result):(e=Ci,t.substr(Ci,4)===br?(n=br,Ci+=4):(n=mt,0===Oi&&s(gr)),n===mt&&(t.substr(Ci,5)===mr?(n=mr,Ci+=5):(n=mt,0===Oi&&s(xr))),n!==mt&&(Ei=e,n=_r(n)),e=n,ji[r]={nextPos:Ci,result:e},e)}function Y(){var e,n,r=59*Ci+38,i=ji[r];return i?(Ci=i.nextPos,i.result):(e=Ci,t.substr(Ci,9)===Ar?(n=Ar,Ci+=9):(n=mt,0===Oi&&s(wr)),n!==mt&&(Ei=e,n=Pr()),e=n,ji[r]={nextPos:Ci,result:e},e)}function J(){var e,n,r=59*Ci+39,i=ji[r];return i?(Ci=i.nextPos,i.result):(e=Ci,t.substr(Ci,3)===Cr?(n=Cr,Ci+=3):(n=mt,0===Oi&&s(Er)),n!==mt&&(Ei=e,n=Nr()),e=n,ji[r]={nextPos:Ci,result:e},e)}function H(){var e,n,r=59*Ci+40,i=ji[r];return i?(Ci=i.nextPos,i.result):(e=Ci,t.substr(Ci,8)===kr?(n=kr,Ci+=8):(n=mt,0===Oi&&s(Sr)),n!==mt&&(Ei=e,n=Or()),e=n,ji[r]={nextPos:Ci,result:e},e)}function q(){var e,n,r=59*Ci+41,i=ji[r];return i?(Ci=i.nextPos,i.result):(e=Ci,t.substr(Ci,4)===jr?(n=jr,Ci+=4):(n=mt,0===Oi&&s(Tr)),n===mt&&(t.substr(Ci,4)===Br?(n=Br,Ci+=4):(n=mt,0===Oi&&s(Fr))),n!==mt&&(Ei=e,n=Rr()),e=n,ji[r]={nextPos:Ci,result:e},e)}function G(){var t,e,n,r=59*Ci+42,i=ji[r];return i?(Ci=i.nextPos,i.result):(t=Ci,e=z(),e!==mt?(n=j(),n!==mt?(Ei=t,e=Lr(e,n),t=e):(Ci=t,t=mt)):(Ci=t,t=mt),ji[r]={nextPos:Ci,result:t},t)}function Q(){var e,n,r,i,o,u,a=59*Ci+43,c=ji[a];if(c)return Ci=c.nextPos,c.result;if(e=Ci,94===t.charCodeAt(Ci)?(n=Vr,Ci++):(n=mt,0===Oi&&s(zr)),n===mt&&(t.substr(Ci,2)===Dr?(n=Dr,Ci+=2):(n=mt,0===Oi&&s(Ir)),n===mt&&(t.substr(Ci,3)===$r?(n=$r,Ci+=3):(n=mt,0===Oi&&s(Mr)),n===mt&&(126===t.charCodeAt(Ci)?(n=Ur,Ci++):(n=mt,0===Oi&&s(Zr)),n===mt&&(t.substr(Ci,2)===Kr?(n=Kr,Ci+=2):(n=mt,0===Oi&&s(Yr)))))),n===mt&&(n=null),n!==mt)if(r=ft(),r!==mt)if(i=et(),i!==mt){for(o=[],u=W();u!==mt;)o.push(u),u=W();o!==mt?(u=ft(),u!==mt?(Ei=e,n=Jr(n,i,o),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)}else Ci=e,e=mt;else Ci=e,e=mt;else Ci=e,e=mt;return ji[a]={nextPos:Ci,result:e},e}function W(){var t,e=59*Ci+44,n=ji[e];return n?(Ci=n.nextPos,n.result):(t=X(),t===mt&&(t=tt()),ji[e]={nextPos:Ci,result:t},t)}function X(){var e,n,r,i=59*Ci+45,o=ji[i];return o?(Ci=o.nextPos,o.result):(e=Ci,46===t.charCodeAt(Ci)?(n=hr,Ci++):(n=mt,0===Oi&&s(dr)),n!==mt?(r=et(),r!==mt?(Ei=e,n=Hr(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt),ji[i]={nextPos:Ci,result:e},e)}function tt(){var e,n,r,i,o=59*Ci+46,u=ji[o];return u?(Ci=u.nextPos,u.result):(e=Ci,91===t.charCodeAt(Ci)?(n=qr,Ci++):(n=mt,0===Oi&&s(Gr)),n!==mt?(r=O(),r!==mt?(93===t.charCodeAt(Ci)?(i=Qr,Ci++):(i=mt,0===Oi&&s(Wr)),i!==mt?(Ei=e,n=Xr(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[o]={nextPos:Ci,result:e},e)}function et(){var e,n,r,i=59*Ci+47,o=ji[i];if(o)return Ci=o.nextPos,o.result;if(e=Ci,n=[],ti.test(t.charAt(Ci))?(r=t.charAt(Ci),Ci++):(r=mt,0===Oi&&s(ei)),r!==mt)for(;r!==mt;)n.push(r),ti.test(t.charAt(Ci))?(r=t.charAt(Ci),Ci++):(r=mt,0===Oi&&s(ei));else n=mt;return n!==mt&&(Ei=e,n=ni(n)),e=n,ji[i]={nextPos:Ci,result:e},e}function nt(){var e,n,r,i,o,u,a=59*Ci+48,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,123===t.charCodeAt(Ci)?(n=ri,Ci++):(n=mt,0===Oi&&s(ii)),n!==mt?(r=ft(),r!==mt?(i=rt(),i===mt&&(i=null),i!==mt?(o=ft(),o!==mt?(125===t.charCodeAt(Ci)?(u=oi,Ci++):(u=mt,0===Oi&&s(si)),u!==mt?(Ei=e,n=ui(i),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[a]={nextPos:Ci,result:e},e)}function rt(){var t,e,n=59*Ci+49,r=ji[n];return r?(Ci=r.nextPos,r.result):(t=Ci,e=it(),e!==mt&&(Ei=t,e=ai(e)),t=e,ji[n]={nextPos:Ci,result:t},t)}function it(){var e,n,r,i,o,u,a=59*Ci+50,c=ji[a];if(c)return Ci=c.nextPos,c.result;if(e=Ci,n=ot(),n!==mt){for(r=[],i=Ci,44===t.charCodeAt(Ci)?(o=mn,Ci++):(o=mt,0===Oi&&s(xn)),o!==mt?(u=it(),u!==mt?(o=[o,u],i=o):(Ci=i,i=mt)):(Ci=i,i=mt);i!==mt;)r.push(i),i=Ci,44===t.charCodeAt(Ci)?(o=mn,Ci++):(o=mt,0===Oi&&s(xn)),o!==mt?(u=it(),u!==mt?(o=[o,u],i=o):(Ci=i,i=mt)):(Ci=i,i=mt);r!==mt?(Ei=e,n=ci(n,r),e=n):(Ci=e,e=mt)}else Ci=e,e=mt;return ji[a]={nextPos:Ci,result:e},e}function ot(){var e,n,r,i,o,u,a=59*Ci+51,c=ji[a];return c?(Ci=c.nextPos,c.result):(e=Ci,n=ft(),n!==mt?(r=st(),r!==mt?(i=ft(),i!==mt?(58===t.charCodeAt(Ci)?(o=an,Ci++):(o=mt,0===Oi&&s(cn)),o!==mt?(u=O(),u===mt&&(u=null),u!==mt?(Ei=e,n=li(r,u),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt)):(Ci=e,e=mt),ji[a]={nextPos:Ci,result:e},e)}function st(){var t,e,n=59*Ci+52,r=ji[n];return r?(Ci=r.nextPos,r.result):(t=Ci,e=ut(),e!==mt&&(Ei=t,e=fi(e)),t=e,t===mt&&(t=Ci,e=et(),e!==mt&&(Ei=t,e=pi(e)),t=e),ji[n]={nextPos:Ci,result:t},t)}function ut(){var e,n,r,i,o=59*Ci+53,u=ji[o];if(u)return Ci=u.nextPos,u.result;if(Oi++,e=Ci,34===t.charCodeAt(Ci)?(n=Ke,Ci++):(n=mt,0===Oi&&s(Ye)),n!==mt){for(r=[],i=at();i!==mt;)r.push(i),i=at();r!==mt?(34===t.charCodeAt(Ci)?(i=Ke,Ci++):(i=mt,0===Oi&&s(Ye)),i!==mt?(Ei=e,n=di(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)}else Ci=e,e=mt;if(e===mt)if(e=Ci,39===t.charCodeAt(Ci)?(n=Qe,Ci++):(n=mt,0===Oi&&s(We)),n!==mt){for(r=[],i=ct();i!==mt;)r.push(i),i=ct();r!==mt?(39===t.charCodeAt(Ci)?(i=Qe,Ci++):(i=mt,0===Oi&&s(We)),i!==mt?(Ei=e,n=di(r),e=n):(Ci=e,e=mt)):(Ci=e,e=mt)}else Ci=e,e=mt;return Oi--,e===mt&&(n=mt,0===Oi&&s(hi)),ji[o]={nextPos:Ci,result:e},e}function at(){var e,n,r,i=59*Ci+54,o=ji[i];return o?(Ci=o.nextPos,o.result):(e=Ci,n=Ci,Oi++,34===t.charCodeAt(Ci)?(r=Ke,Ci++):(r=mt,0===Oi&&s(Ye)),r===mt&&(92===t.charCodeAt(Ci)?(r=vi,Ci++):(r=mt,0===Oi&&s(yi))),Oi--,r===mt?n=void 0:(Ci=n,n=mt),n!==mt?(r=lt(),r!==mt?(Ei=e,n=bi(),e=n):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(t.substr(Ci,2)===gi?(e=gi,Ci+=2):(e=mt,0===Oi&&s(mi))),ji[i]={nextPos:Ci,result:e},e)}function ct(){var e,n,r,i=59*Ci+55,o=ji[i];return o?(Ci=o.nextPos,o.result):(e=Ci,n=Ci,Oi++,39===t.charCodeAt(Ci)?(r=Qe,Ci++):(r=mt,0===Oi&&s(We)),r===mt&&(92===t.charCodeAt(Ci)?(r=vi,Ci++):(r=mt,0===Oi&&s(yi))),Oi--,r===mt?n=void 0:(Ci=n,n=mt),n!==mt?(r=lt(),r!==mt?(Ei=e,n=bi(),e=n):(Ci=e,e=mt)):(Ci=e,e=mt),e===mt&&(t.substr(Ci,2)===xi?(e=xi,Ci+=2):(e=mt,0===Oi&&s(_i))),ji[i]={nextPos:Ci,result:e},e)}function lt(){var e,n=59*Ci+56,r=ji[n];return r?(Ci=r.nextPos,r.result):(t.length>Ci?(e=t.charAt(Ci),Ci++):(e=mt,0===Oi&&s(Ai)),ji[n]={nextPos:Ci,result:e},e)}function ft(){var e,n,r=59*Ci+58,i=ji[r];if(i)return Ci=i.nextPos,i.result;for(e=[],wi.test(t.charAt(Ci))?(n=t.charAt(Ci),Ci++):(n=mt,0===Oi&&s(Pi));n!==mt;)e.push(n),wi.test(t.charAt(Ci))?(n=t.charAt(Ci),Ci++):(n=mt,0===Oi&&s(Pi));return ji[r]={nextPos:Ci,result:e},e}function pt(t){return t.replace(/(^\s+)|(\s+$)/,"").replace(/[\r\n]/g,"\\n")}function ht(t){return t.replace(/[ \r\n\t]+/g," ")}function dt(t){return t=t.filter(function(t){return!/^[\n\t\r]+$/.test(t.value)}),1===t.length&&"string"===t[0].type?t[0]:t}function vt(t){function e(t){for(var e,n=t.length;n--&&(e=t[n],"textNode"==e.type&&!/\S/.test(e.value)&&!e.decoded);)t.splice(n,1);return t}return e(e(t.reverse()).reverse())}function yt(t){return t.replace(/[\n\r]+/g,"\\n").replace(/'/g,"\\'")}var bt,gt=arguments.length>1?arguments[1]:{},mt={},xt={Start:a},_t=a,At=function(t){return t},wt="<!DOCTYPE",Pt={type:"literal",value:"<!DOCTYPE",description:'"<!DOCTYPE"'},Ct=/^[^>]/,Et={type:"class",value:"[^>]",description:"[^>]"},Nt=">",kt={type:"literal",value:">",description:'">"'},St=function(t){return["doctype",t.join("")]},Ot=function(t){return vt(t)},jt="<!--",Tt={type:"literal",value:"<!--",description:'"<!--"'},Bt="-->",Ft={type:"literal",value:"-->",description:'"-->"'},Rt=function(t){return t},Lt=function(t){return["comment",yt(pt(t.join("")))]},Vt="<script",zt={type:"literal",value:"<script",description:'"<script"'},Dt="</script>",It={type:"literal",value:"</script>",description:'"</script>"'},$t=function(t,e){return["element","script",t,[["text",yt(e.join(""))]]]},Mt=function(){return n()},Ut="<",Zt={type:"literal",value:"<",description:'"<"'},Kt="area",Yt={type:"literal",value:"area",description:'"area"'},Jt="base",Ht={type:"literal",value:"base",description:'"base"'},qt="br",Gt={type:"literal",value:"br",description:'"br"'},Qt="col",Wt={type:"literal",value:"col",description:'"col"'},Xt="command",te={type:"literal",value:"command",description:'"command"'},ee="embed",ne={type:"literal",value:"embed",description:'"embed"'},re="hr",ie={type:"literal",value:"hr",description:'"hr"'},oe="img",se={type:"literal",value:"img",description:'"img"'},ue="input",ae={type:"literal",value:"input",description:'"input"'},ce="keygen",le={type:"literal",value:"keygen",description:'"keygen"'},fe="link",pe={type:"literal",value:"link",description:'"link"'},he="meta",de={type:"literal",value:"meta",description:'"meta"'},ve="param",ye={type:"literal",value:"param",description:'"param"'},be="source",ge={type:"literal",value:"source",description:'"source"'},me="track",xe={type:"literal",value:"track",description:'"track"'},_e="wbr",Ae={type:"literal",value:"wbr",description:'"wbr"'},we="/>",Pe={type:"literal",value:"/>",description:'"/>"'},Ce=function(t,e,n){return n&&t!=n.name&&r("</"+t+">"),["element",t,e,[]]},Ee="</",Ne={type:"literal",value:"</",description:'"</"'},ke=function(t){return{name:t}},Se=function(t,e,n){return t.name!=n.name&&r("</"+t.name+">"),["element",t.name,t.attributes,e]},Oe=function(t){return["text",yt(ht(t.join("")))]},je="{{",Te={type:"literal",value:"{{",description:'"{{"'},Be=function(t){return t},Fe=function(t){return["element",t.name,t.attributes,[]]},Re=function(t,e){return{name:t,attributes:e}},Le=function(t){return t},Ve=/^[a-zA-Z0-9:_.\-]/,ze={type:"class",value:"[a-zA-Z0-9:_\\.\\-]",description:"[a-zA-Z0-9:_\\.\\-]"},De=function(t){return t.join("")},Ie="=",$e={type:"literal",value:"=",description:'"="'},Me=function(t,e){return["attribute",t,e]},Ue=function(t,e){return["property",t,e]},Ze=function(t){return["attribute",t,[]]},Ke='"',Ye={type:"literal",value:'"',description:'"\\""'},Je=/^[^"]/,He={type:"class",value:'[^"]',description:'[^"]'},qe=function(){return["string",n()]},Ge=function(t){return dt(t)},Qe="'",We={type:"literal",value:"'",description:'"\'"'},Xe=/^[^']/,tn={type:"class",value:"[^']",description:"[^']"},en="}}",nn={type:"literal",value:"}}",description:'"}}"'},rn=function(t){return["script",t]},on=function(t){return["block",t[1]]},sn="?",un={type:"literal",value:"?",description:'"?"'},an=":",cn={type:"literal",value:":",description:'":"'},ln=function(t,e,n){return["condition",t,e,n]},fn="(",pn={type:"literal",value:"(",description:'"("'},hn=")",dn={type:"literal",value:")",description:'")"'},vn=function(t){return t},yn="()",bn={type:"literal",value:"()",description:'"()"'},gn=function(){return[]},mn=",",xn={type:"literal",value:",",description:'","'},_n=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},An=function(t,e){return["assign",t,e]},wn="&&",Pn={type:"literal",value:"&&",description:'"&&"'},Cn="||",En={type:"literal",value:"||",description:'"||"'},Nn="===",kn={type:"literal",value:"===",description:'"==="'},Sn="==",On={type:"literal",value:"==",description:'"=="'},jn="!==",Tn={type:"literal",value:"!==",description:'"!=="'},Bn="!=",Fn={type:"literal",value:"!=",description:'"!="'},Rn=">==",Ln={type:"literal",value:">==",description:'">=="'},Vn=">=",zn={type:"literal",value:">=",description:'">="'},Dn="<==",In={type:"literal",
value:"<==",description:'"<=="'},$n="<=",Mn={type:"literal",value:"<=",description:'"<="'},Un="+",Zn={type:"literal",value:"+",description:'"+"'},Kn="-",Yn={type:"literal",value:"-",description:'"-"'},Jn="%",Hn={type:"literal",value:"%",description:'"%"'},qn="*",Gn={type:"literal",value:"*",description:'"*"'},Qn="/",Wn={type:"literal",value:"/",description:'"/"'},Xn=function(t,e,n){return["operator",e,t,n]},tr=function(t){return t},er=function(t,e){for(var n=0,r=e.length;r>n;n++)t=["modifier",e[n].name,[t].concat(e[n].parameters)];return t},nr="|",rr={type:"literal",value:"|",description:'"|"'},ir=function(t,e){return{name:t,parameters:e||[]}},or=function(t){return t},sr="!",ur={type:"literal",value:"!",description:'"!"'},ar=function(t,e){return["not",e]},cr=function(t,e){return["negative",e]},lr=/^[0-9]/,fr={type:"class",value:"[0-9]",description:"[0-9]"},pr=function(t){return["literal",parseFloat(n())]},hr=".",dr={type:"literal",value:".",description:'"."'},vr=function(t){return["group",t]},yr=function(t){return t},br="true",gr={type:"literal",value:"true",description:'"true"'},mr="false",xr={type:"literal",value:"false",description:'"false"'},_r=function(t){return["literal","true"===t]},Ar="undefined",wr={type:"literal",value:"undefined",description:'"undefined"'},Pr=function(){return["literal",void 0]},Cr="NaN",Er={type:"literal",value:"NaN",description:'"NaN"'},Nr=function(){return["literal",NaN]},kr="Infinity",Sr={type:"literal",value:"Infinity",description:'"Infinity"'},Or=function(){return["literal",1/0]},jr="null",Tr={type:"literal",value:"null",description:'"null"'},Br="NULL",Fr={type:"literal",value:"NULL",description:'"NULL"'},Rr=function(){return["literal",null]},Lr=function(t,e){return["call",t,e]},Vr="^",zr={type:"literal",value:"^",description:'"^"'},Dr="~>",Ir={type:"literal",value:"~>",description:'"~>"'},$r="<~>",Mr={type:"literal",value:"<~>",description:'"<~>"'},Ur="~",Zr={type:"literal",value:"~",description:'"~"'},Kr="<~",Yr={type:"literal",value:"<~",description:'"<~"'},Jr=function(t,e,n){return["reference",[e].concat(n),t]},Hr=function(t){return t},qr="[",Gr={type:"literal",value:"[",description:'"["'},Qr="]",Wr={type:"literal",value:"]",description:'"]"'},Xr=function(t){return t},ti=/^[a-zA-Z_$0-9]/,ei={type:"class",value:"[a-zA-Z_$0-9]",description:"[a-zA-Z_$0-9]"},ni=function(t){return n()},ri="{",ii={type:"literal",value:"{",description:'"{"'},oi="}",si={type:"literal",value:"}",description:'"}"'},ui=function(t){return["hash",t]},ai=function(t){for(var e={},n=0,r=t.length;r>n;n++)e[t[n].key]=t[n].value;return e},ci=function(t,e){return[t].concat(e.length?e[0][1]:[])},li=function(t,e){return{key:t,value:e}},fi=function(t){return t[1]},pi=function(t){return t},hi={type:"other",description:"string"},di=function(t){return["string",t.join("")]},vi="\\",yi={type:"literal",value:"\\",description:'"\\\\"'},bi=function(){return n()},gi='\\"',mi={type:"literal",value:'\\"',description:'"\\\\\\""'},xi="\\'",_i={type:"literal",value:"\\'",description:'"\\\\\'"'},Ai={type:"any",description:"any character"},wi=/^[ \n\r\t]/,Pi={type:"class",value:"[ \\n\\r\\t]",description:"[ \\n\\r\\t]"},Ci=0,Ei=0,Ni=[{line:1,column:1,seenCR:!1}],ki=0,Si=[],Oi=0,ji={};if("startRule"in gt){if(!(gt.startRule in xt))throw new Error("Can't start parsing from rule \""+gt.startRule+'".');_t=xt[gt.startRule]}if(bt=_t(),bt!==mt&&Ci===t.length)return bt;throw bt!==mt&&Ci<t.length&&s({type:"end",description:"end of input"}),u(null,Si,ki<t.length?t.charAt(ki):null,ki<t.length?o(ki,ki+1):o(ki,ki))}return t(e,Error),{SyntaxError:e,parse:n}}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return o.extendClass(s,{initialize:t||function(){},_update:e||function(){}})}var o=n(7),s=function(){function t(e,n){r(this,t),this._attrBindings={},this.ref=e,this.view=n,this.options=n.template.options,this._attributeClasses=this.options.attributes}return t.prototype.setAttribute=function(t,e){this.setAsRegisteredAttribute(t,e)||void 0!=e&&this.ref.setAttribute(t,e)},t.prototype.setProperty=function(t,e){this.setAsRegisteredAttribute(t,e)||(this.ref.nodeType?this.ref[t]=e:this.ref.setAttribute(t,e))},t.prototype.setAsRegisteredAttribute=function(t,e){if(this._attrBindings[t])this._attrBindings[t].value=e;else{var n=this._attributeClasses.get(t);if(!n)return!1;this._attrBindings[t]=new n(this.ref,t,e,this.view)}return!0},t.prototype.update=function(t){this._update();for(var e in this._attrBindings)this._attrBindings[e].update()},t.prototype.destroy=function(){for(var t in this._attrBindings)this._attrBindings[t].destroy()},t}();e.Binding=s,e.binding=i}])});